<div class="editable-set">
	<form class="editable-set__form">
		{% if set.tunes.length %}
		<div class="editable-set__details">
			<h2 class="editable-set__name"><input class="editable-set__set-name" value="{{set.name}}"></h2>
			<ol class="editable-set__tunes">
				{% for tuneIndex, tune in set.tunes %}
				<li data-tune-id="{{ tune._id }}"><h4 class="editable-set__tune-name"><button class="editable-set__view-abc"></button>{{ tune.name | deTheify | safe }}</h4>
					{% if tune.keys.length > 1 %}
						<select class="editable-set__tune__key-selector">
							{% for key in tune.keys %}
							<option value="{{ key }}" {% if key === set.keys[tuneIndex] %} selected {% endif %}>{{ key }}</option>
							{% endfor %}
						</select>
					{% else %}
						{{ tune.keys[0] }}
					{% endif %}
					<button class="editable-set__tune__delete"> delete </button>
						{% if tuneIndex %}<button class="editable-set__tune__move-up"> move up </button>{% endif %}
				</li>
				{% endfor %}
			</ol>
		</div>
		<div class="editable-set__actions">
			{% if isEditing %}
			<input type="submit" value="save changes">
			<input class="editable-set__delete" type="button" value="delete set">
			{% else %}
				<input type="submit" value="new set">
				{% for tunebook in tunebooks %}
				<input type="submit" value="{{tunebook}}" data-tunebook="{{tunebook}}">
				{% endfor %}
			{% endif %}
		</div>
		{% endif %}
	</form>
	<div class="editable-set__abc"></div>
</div>


